/*
 * pdu.h
 *
 *  Created on: Mar 2, 2025
 *      Author: apple
 */

#ifndef INC_PDU_H_
#define INC_PDU_H_

#ifdef __cplusplus
extern "C" {
#endif

#include "main.h"

#define STR_LEN 50  // Tamaño del buffer para sprintf()

// Estructura para almacenar datos de voltaje y corriente
typedef struct {
    ADC_HandleTypeDef *hadc;
    uint32_t v_channel;
    uint32_t i_channel;
    float voltage;
    float current;
    const char *label;  // Nombre para impresión (ej. "V5", "V3bis")
} PDU_Channel;

// Función para actualizar y enviar datos al puerto serie
void updatePDU(PDU_Channel *pdu);



#ifdef __cplusplus
}
#endif


#endif /* INC_PDU_H_ */
